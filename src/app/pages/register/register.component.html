<div class="register-wrapper animate__animated animate__fadeIn" [class.reverse-layout]="isRegister" >
    <div class="register-card">
        <div id="brand">
            <button>
              <a >
                <span>3DVerse</span>
              </a>
            </button>
          </div>
  
      <h2>Crear una cuenta</h2>
      <p class="subtitle">Completa el formulario para registrarte</p>
  
      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
        <div class="form-group">
          <label for="username">Nombre de usuario</label>
          <div class="input-container">
            <svg class="input-icon" viewBox="0 0 24 24">
              <path fill="currentColor" d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
            </svg>
            <input 
              type="text" 
              id="username" 
              formControlName="username"
              placeholder="tu.usuario"
              [class.invalid]="registerForm.get('username')?.invalid && registerForm.get('username')?.touched"
            >
          </div>
          <div *ngIf="registerForm.get('username')?.invalid && registerForm.get('username')?.touched" 
               class="error-message">
            <svg viewBox="0 0 24 24">
              <path fill="currentColor" d="M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z"/>
            </svg>
            Por favor ingresa un nombre de usuario válido
          </div>
        </div>
  
        <div class="form-group">
          <label for="email">Correo electrónico</label>
          <div class="input-container">
            <svg class="input-icon" viewBox="0 0 24 24">
              <path fill="currentColor" d="M22 6C22 4.9 21.1 4 20 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6M20 6L12 11L4 6H20M20 18H4V8L12 13L20 8V18Z"/>
            </svg>
            <input 
              type="email" 
              id="email" 
              formControlName="email"
              placeholder="tu@email.com"
              [class.invalid]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
            >
          </div>
          <div *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched" 
               class="error-message">
            <svg viewBox="0 0 24 24">
              <path fill="currentColor" d="M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z"/>
            </svg>
            Por favor ingresa un correo electrónico válido
          </div>
        </div>
  
        <div class="form-group">
          <label for="password">Contraseña</label>
          <div class="input-container">
            <svg class="input-icon" viewBox="0 0 24 24">
              <path fill="currentColor" d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"/>
            </svg>
            <input 
              type="password" 
              id="password" 
              formControlName="password"
              placeholder="••••••••"
              [class.invalid]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"
            >
            <button type="button" class="toggle-password" (click)="togglePasswordVisibility()">
              <svg viewBox="0 0 24 24">
                <path fill="currentColor" d="M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z"/>
              </svg>
            </button>
          </div>
          <div *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched" 
               class="error-message">
            <svg viewBox="0 0 24 24">
              <path fill="currentColor" d="M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z"/>
            </svg>
            La contraseña debe tener al menos 6 caracteres
          </div>
        </div>
  
        <div class="form-group">
          <label for="confirmPassword">Confirmar Contraseña</label>
          <div class="input-container">
            <svg class="input-icon" viewBox="0 0 24 24">
              <path fill="currentColor" d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"/>
            </svg>
            <input 
              type="password" 
              id="confirmPassword" 
              formControlName="confirmPassword"
              placeholder="••••••••"
              [class.invalid]="registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched"
            >
            <button type="button" class="toggle-password" (click)="toggleConfirmPasswordVisibility()">
              <svg viewBox="0 0 24 24">
                <path fill="currentColor" d="M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z"/>
              </svg>
            </button>
          </div>
          <div *ngIf="registerForm.hasError('passwordMismatch') && registerForm.get('confirmPassword')?.touched" 
               class="error-message">
            <svg viewBox="0 0 24 24">
              <path fill="currentColor" d="M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z"/>
            </svg>
            Las contraseñas no coinciden
          </div>
        </div>
  
        <div class="form-group">
          <label class="terms-checkbox">
            <input type="checkbox" formControlName="acceptTerms" required>
            <span>Acepto los <a href="#" class="terms-link">Términos y Condiciones</a> y la <a href="#" class="terms-link">Política de Privacidad</a></span>
          </label>
          <div *ngIf="registerForm.get('acceptTerms')?.invalid && registerForm.get('acceptTerms')?.touched" 
               class="error-message">
            <svg viewBox="0 0 24 24">
              <path fill="currentColor" d="M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z"/>
            </svg>
            Debes aceptar los términos y condiciones
          </div>
        </div>
  
        <button type="submit" class="register-button" [disabled]="registerForm.invalid || isLoading">
          <span *ngIf="!isLoading">Registrarse</span>
          <span *ngIf="isLoading" class="loading-spinner"></span>
        </button>
  
        <div *ngIf="errorMessage" class="error-message server-error">
          <svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z"/>
          </svg>
          {{errorMessage}}
        </div>
  
        <div class="login-link">
          ¿Ya tienes una cuenta? <a (click)="navigateToLogin()">Inicia sesión</a>
        </div>
      </form>
    </div>
  
    <div class="register-image">
      <!-- Imagen decorativa -->
    </div>
  </div>